<app-header heading="Vaccines" [showMenuButton]="showCart? true:false" [showSubHeader]="showCart? false:true" [showSearch]="true" [showCart]="true" [badgeCount]="badgeValue" (searchEvents)="onSearch($event)">
</app-header>
<ion-content>
 <div *ngIf="productList?.length>0">
  <ion-card *ngFor="let product of productList | filter : 'productDescription' : searchStr;let i = index">
   
    <ion-grid class="card-section">
      <ion-row class="ion-no-padding"class="ion-no-margin" >
      <!--  <ion-col size="1">
          <ion-checkbox class="chk"></ion-checkbox>
        </ion-col>-->
        <ion-col size="4">
          <div  class="offer-content">
            <ion-grid class="offer-item">
              <ion-row style="align-items: center;">
                <ion-col size="4">
                  <div class="line-left"></div>
                </ion-col>
                <ion-col size="4">
                  <div class="ion-text-center">
                    <ion-icon style="color: white;" name="star"></ion-icon>
                  </div>
                </ion-col>
                <ion-col size="4">
                  <div class="line-right"></div>
                  </ion-col>
              </ion-row>
              <ion-row *ngIf="dViaProduct.length !=0 && dViaProduct[i]?.isDiscount">
                <ion-col >
                  <div class="ion-text-center">
                   <table>
                   <thead>
                     <tr>
                       <th>Unit</th>
                       <th *ngIf="dViaProduct[i].isUDiscount">Saving</th>
                       <th *ngIf="dViaProduct[i].isPDiscount">Discount</th>
                     </tr>
                   </thead>
                   <tbody *ngIf="dViaProduct[i].isPDiscount">
                    
                    <tr *ngFor="let item of dViaProduct[i].pDiscount;let j=index;">
                      <td>{{item.minQty}}</td>
                      <td>{{(item.disPercent | number:'1.0-0') + " %"}}</td>
                      </tr>
                   </tbody>
                   <tbody *ngIf="dViaProduct[i].isUDiscount">
                    <tr *ngFor="let item of dViaProduct[i].uDiscount;let j=index;">
                    <td>{{item.minQty}}</td>
                    <td>{{getDiscountTotal(item.minQty,item.disAmtPerUnit) | currency:'INR':'symbol-narrow':'1.0-0'}}</td>
                    </tr>
                  </tbody>
                  </table>
                  </div>
                </ion-col>
              </ion-row>
              <ion-row *ngIf="dViaProduct.length !=0 && !dViaProduct[i]?.isDiscount">
                <ion-col>
                  <div class="ion-text-center">
                    <ion-label style="font-weight: bold;font-size: 10px;"> Rotrix(10) & Havrix(10)  Discount 10%</ion-label>
                  </div>
                </ion-col>
              </ion-row>
            </ion-grid>
          </div>
          <div  class="content"></div>
        </ion-col >
        <ion-col class="img-padding" >
          <div class="ion-text-center">
            <img [src]="getImageURL(product.productImage)">
          </div>
        </ion-col>
        <ion-col class="img-padding" size="2">
          <div class="ion-text-right">
            <ion-label>{{product?.stokiestRate > 0 ? (product?.stokiestRate | currency:'INR':'symbol-narrow':'1.0-0'):(product?.ptr | currency:'INR':'symbol-narrow':'1.0-0')}}</ion-label>
          </div>
        </ion-col>
      </ion-row>
      <ion-row class="content-section">
        <ion-col size="8">
          <div class="ion-text-left">
            <ion-label >
              <h2 class="text-color">{{product.productDescription}}<ion-icon class="info-icon" name="information-circle-outline" (click)="viewPdf(product)"></ion-icon></h2>
               <p *ngIf="product?.stockistCerpCode" [ngClass]="{'color-green':product?.salebleQty >= product.quantity,
                'color-red':product?.salebleQty < product.quantity   
              }">{{product?.salebleQty < product.quantity ?'Not Available':'Available'}}</p>
            </ion-label>
          </div>
        </ion-col>
        <ion-col size="4">
          <ion-row>
            <ion-col>
              <div class="ion-text-right">
                <ion-icon class="product-quantity" name="remove-circle-outline" (click)="modifyQuantity('remove',product.productCode)"></ion-icon>
                <ion-label class="quantity">{{product.quantity}}</ion-label>
                <ion-icon class="product-quantity" name="add-circle-outline" (click)="modifyQuantity('add',product.productCode)"></ion-icon>
              </div>
            </ion-col>
          </ion-row>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card>
 </div>
</ion-content>

<app-footer  [isFirstOutline]="showCart?true:false" [moreEvent]="showCart?true:false" [isSecondOutline]=false [firstTitle]="showCart?'product-list.product-listPage.aCart':btnTitle" [secondTitle]="'product-list.product-listPage.bNow'" (firstEvent)="showCart?addToCart():doneButtonClicked()" (secondEvent)="buyNow()"></app-footer>
